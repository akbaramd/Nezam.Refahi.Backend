---
globs: **/Repositories/**,**/*Reposit*.cs
alwaysApply: false
---
# Repository Implementation Rulebook

âš ï¸ **Ù‡Ø± Ú†ÛŒØ²ÛŒ Ø®Ø§Ø±Ø¬ Ø§Ø² Ø§ÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¨Ø§ÛŒØ¯ Ø¨Ø±Ø±Ø³ÛŒ Ùˆ Ø¨Ù‡ ØªØµÙˆÛŒØ¨ Ø¨Ø±Ø³Ø¯.**  
âš ï¸ **Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Repository Ø¨Ø§ÛŒØ¯ Ø³Ø®Øªâ€ŒÚ¯ÛŒØ±Ø§Ù†Ù‡ Ùˆ Ø¨Ø§ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯.**  
âš ï¸ **Ø§Ø² ØªÚ©Ø±Ø§Ø± Ù…Ù†Ø·Ù‚ Ùˆ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² DbContext/DbSet Ø®ÙˆØ¯Ø¯Ø§Ø±ÛŒ Ø´ÙˆØ¯.**

---

## ğŸ“Œ Ø§ØµÙˆÙ„ Ù¾Ø§ÛŒÙ‡ Repository

### 1. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ `EfRepository<TDbContext, T, TKey>`
- **MUST**: Ù‡Ù…Ù‡ RepositoryÙ‡Ø§ Ø¨Ø§ÛŒØ¯ Ø§Ø² `EfRepository<TDbContext, T, TKey>` Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ú©Ù†Ù†Ø¯.
- **MUST**: Interface Repository Ø¨Ø§ÛŒØ¯ Ø§Ø² `IRepository<T, TKey>` Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ú©Ù†Ø¯.
- **MUST**: Ø§Ø² Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯Ø› ØªÚ©Ø±Ø§Ø± Ù…Ù†Ø·Ù‚ Ù…Ù…Ù†ÙˆØ¹ Ø§Ø³Øª.

### 2. Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ (ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ®Ø·ÛŒ)
Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ `EfRepository` Ù…ØªØ¯Ù‡Ø§ÛŒ Ø²ÛŒØ± Ø±Ø§ Ø§Ø±Ø§Ø¦Ù‡ Ù…ÛŒâ€ŒØ¯Ù‡Ø¯:

#### Ù…ØªØ¯Ù‡Ø§ÛŒ Write (Ø§Ø² `IRepository<T, TKey>`):
- `Task AddAsync(T entity, bool save = false, CancellationToken cancellationToken = default)`
- `Task UpdateAsync(T entity, bool save = false, CancellationToken cancellationToken = default)`
- `Task DeleteAsync(T entity, bool save = false, CancellationToken cancellationToken = default)`
- `Task AddRangeAsync(IEnumerable<T> entities, bool save = false, CancellationToken cancellationToken = default)`
- `Task UpdateRangeAsync(IEnumerable<T> entities, bool save = false, CancellationToken cancellationToken = default)`
- `Task DeleteRangeAsync(IEnumerable<T> entities, bool save = false, CancellationToken cancellationToken = default)`
- `Task<int> BulkDeleteAsync(Expression<Func<T, bool>> predicate, CancellationToken cancellationToken = default)`
- `Task SaveAsync(CancellationToken cancellationToken = default)`

#### Ù…ØªØ¯Ù‡Ø§ÛŒ Read (Ø§Ø² `ReadOnlyEfRepository` Ú©Ù‡ Ø§Ø² `IReadOnlyRepository<T, TKey>` Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯):

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡:**
- `Task<T> GetByIdAsync(TKey id, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§ ID (Ø§Ø³ØªØ«Ù†Ø§ Ù…ÛŒâ€ŒØ§Ù†Ø¯Ø§Ø²Ø¯ Ø§Ú¯Ø± Ù¾ÛŒØ¯Ø§ Ù†Ø´ÙˆØ¯) âš ï¸ Ø¨Ø±Ø§ÛŒ nullable Ø§Ø² `FindOneAsync` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
- `Task<T?> FindOneAsync(Expression<Func<T, bool>> predicate, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒÚ© Entity Ø¨Ø§ Ø´Ø±Ø·
- `Task<T?> FindOneAsync(ISpecification<T> specification, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒÚ© Entity Ø¨Ø§ Specification
- `Task<IEnumerable<T>> FindAsync(Expression<Func<T, bool>> predicate, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú†Ù†Ø¯ Entity Ø¨Ø§ Ø´Ø±Ø·
- `Task<IEnumerable<T>> FindAsync(ISpecification<T> specification, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú†Ù†Ø¯ Entity Ø¨Ø§ Specification
- `Task<IEnumerable<T>> FindAsync(Expression<Func<T, bool>> predicate, bool asNoTracking, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§ Ú©Ù†ØªØ±Ù„ Tracking
- `Task<bool> ExistsAsync(Expression<Func<T, bool>> predicate, CancellationToken cancellationToken = default)` - Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ø¨Ø§ Ø´Ø±Ø·
- `Task<bool> ExistsAsync(ISpecification<T> specification, CancellationToken cancellationToken = default)` - Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Ø¨Ø§ Specification
- `Task<int> CountAsync(CancellationToken cancellationToken = default)` - Ø´Ù…Ø§Ø±Ø´ Ù‡Ù…Ù‡
- `Task<int> CountAsync(Expression<Func<T, bool>> predicate, CancellationToken cancellationToken = default)` - Ø´Ù…Ø§Ø±Ø´ Ø¨Ø§ Ø´Ø±Ø·
- `Task<int> CountAsync(ISpecification<T> specification, CancellationToken cancellationToken = default)` - Ø´Ù…Ø§Ø±Ø´ Ø¨Ø§ Specification

**Ù…ØªØ¯Ù‡Ø§ÛŒ Pagination:**
- `Task<PaginatedResult<T>> GetPaginatedAsync(IPaginatedSpecification<T> specification, CancellationToken cancellationToken = default)` - ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Specification
- `Task<PaginatedResult<T>> GetPaginatedAsync(IPaginatedSortableSpecification<T> specification, CancellationToken cancellationToken = default)` - ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ
- `Task<IEnumerable<T>> GetPagedAsync(int pageNumber, int pageSize, CancellationToken cancellationToken = default)` - ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø³Ø§Ø¯Ù‡
- `Task<IEnumerable<T>> GetPagedAsync(int pageNumber, int pageSize, ISpecification<T> specification, CancellationToken cancellationToken = default)` - ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Specification

**Ù…ØªØ¯Ù‡Ø§ÛŒ Projection (Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ):**
- `Task<TResult?> FindOneAsync<TResult>(Expression<Func<T, bool>> predicate, Expression<Func<T, TResult>> selector, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒÚ© Entity Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§
- `Task<IEnumerable<TResult>> FindAsync<TResult>(Expression<Func<T, bool>> predicate, Expression<Func<T, TResult>> selector, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ú†Ù†Ø¯ Entity Ùˆ Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§
- `Task<IEnumerable<TResult>> GetAllAsync<TResult>(Expression<Func<T, TResult>> selector, CancellationToken cancellationToken = default)` - Ú¯Ø±ÙØªÙ† Ù‡Ù…Ù‡ Ø¨Ø§ Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ú©Ù…Ú©ÛŒ:**
- `Task<IEnumerable<T>> FindAsync(Expression<Func<T, bool>> predicate, bool asNoTracking, CancellationToken cancellationToken = default)` - Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§ Ú©Ù†ØªØ±Ù„ Tracking

**Ù…ØªØ¯Ù‡Ø§ÛŒ Ù…Ø­Ø§ÙØ¸Øªâ€ŒØ´Ø¯Ù‡ (Protected):**
- `protected virtual IQueryable<T> PrepareQuery(IQueryable<T> query)` - Ø¢Ù…Ø§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Query Ø¨Ø§ Include Ùˆ AsNoTracking
- `protected IQueryable<T> ApplySpecification(ISpecification<T>? specification)` - Ø§Ø¹Ù…Ø§Ù„ Specification Ø±ÙˆÛŒ Query

### 3. Ù‚ÙˆØ§Ù†ÛŒÙ† Ø³Ø®Øª (ØºÛŒØ±Ù‚Ø§Ø¨Ù„ ØªØ®Ø·ÛŒ)

#### âŒ Ù…Ù…Ù†ÙˆØ¹:
- **DO NOT** ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ø¯Ø¯ `AddAsync`, `UpdateAsync`, `DeleteAsync` Ø¯Ø± Repository ÛŒØ§ Interface
- **DO NOT** Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² `_context.DbSet.AddAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `base.AddAsync()`
- **DO NOT** Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² `_dbSet.ToListAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `FindAsync()` ÛŒØ§ `PrepareQuery()`
- **DO NOT** Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² `_dbSet.AnyAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `ExistsAsync()` ÛŒØ§ `AnyAsync()` Ø§Ø² Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡
- **DO NOT** Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ `_context` Ø¨Ø±Ø§ÛŒ Ø¹Ù…Ù„ÛŒØ§Øª CRUD

#### âœ… Ø¨Ø§ÛŒØ¯:
- **MUST** Ø§Ø² `FindAsync()` Ø¨Ø±Ø§ÛŒ Ø¬Ø³ØªØ¬ÙˆÛŒ Ú†Ù†Ø¯ÛŒÙ† Entity Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST** Ø§Ø² `ExistsAsync()` Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Entity Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST** Ø§Ø² `PrepareQuery()` Ø¨Ø±Ø§ÛŒ IncludeÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST** Ø§Ø² `DeleteRangeAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ú†Ù†Ø¯ÛŒÙ† Entity Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST** Ø§Ø² `BulkDeleteAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØªØ± Ø¨Ø§ ExecuteDelete Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯

---

## ğŸ—ï¸ Ø³Ø§Ø®ØªØ§Ø± Ø§Ø³ØªØ§Ù†Ø¯Ø§Ø±Ø¯ Repository

### Template Ù¾Ø§ÛŒÙ‡:

```csharp
using Microsoft.EntityFrameworkCore;
using MCA.SharedKernel.Infrastructure.Repositories;
using Nezam.Refahi.[Module].Domain.Entities;
using Nezam.Refahi.[Module].Domain.Repositories;
using Nezam.Refahi.[Module].Infrastructure.Persistence;

namespace Nezam.Refahi.[Module].Infrastructure.Persistence.Repositories;

/// <summary>
/// EF Core implementation of I[Entity]Repository
/// </summary>
public class [Entity]Repository : EfRepository<[DbContext], [Entity], Guid>, I[Entity]Repository
{
    public [Entity]Repository([DbContext] context) : base(context)
    {
    }

    protected override IQueryable<[Entity]> PrepareQuery(IQueryable<[Entity]> query)
    {
        // Include related entities here
        return query
            .Include(e => e.RelatedEntity)
            .Include(e => e.Collection);
    }

    // Custom query methods using base class methods
    public async Task<List<[Entity]>> GetByXAsync(Guid x, CancellationToken cancellationToken = default)
    {
        return (await FindAsync(e => e.X == x, cancellationToken: cancellationToken)).ToList();
    }

    public async Task<bool> HasXAsync(Guid id, CancellationToken cancellationToken = default)
    {
        return await ExistsAsync(e => e.Id == id && e.X != null, cancellationToken: cancellationToken);
    }

    // AddAsync, UpdateAsync, DeleteAsync are provided by the base EfRepository class
}
```

---

## ğŸ“ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ

### 1. Ø¬Ø³ØªØ¬ÙˆÛŒ Ú†Ù†Ø¯ÛŒÙ† Entity (Find Pattern)

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task<List<Entity>> GetByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    return await PrepareQuery(_dbSet)
        .Where(e => e.X == x)
        .OrderBy(e => e.CreatedAt)
        .ToListAsync(cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­:
```csharp
public async Task<List<Entity>> GetByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    return (await FindAsync(e => e.X == x, cancellationToken: cancellationToken))
        .OrderBy(e => e.CreatedAt)
        .ToList();
}
```

**Ù†Ú©ØªÙ‡**: Ø§Ú¯Ø± Ù†ÛŒØ§Ø² Ø¨Ù‡ Ù…Ø±ØªØ¨â€ŒØ³Ø§Ø²ÛŒ Ø¯Ø§Ø±ÛŒØ¯ØŒ Ø§Ø² `FindAsync()` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯ Ùˆ Ø³Ù¾Ø³ Ø¯Ø± Ø­Ø§ÙØ¸Ù‡ Ù…Ø±ØªØ¨ Ú©Ù†ÛŒØ¯ØŒ ÛŒØ§ Ø§Ø² `PrepareQuery()` Ø¨Ø§ `OrderBy().ToListAsync()` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

### 2. Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† ÛŒÚ© Entity (FindOne Pattern)

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task<Entity?> GetByXAsync(string x, CancellationToken cancellationToken = default)
{
    return await PrepareQuery(_dbSet)
        .FirstOrDefaultAsync(e => e.X == x, cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Predicate):
```csharp
public async Task<Entity?> GetByXAsync(string x, CancellationToken cancellationToken = default)
{
    return await FindOneAsync(e => e.X == x, cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Specification):
```csharp
public async Task<Entity?> GetByXAsync(string x, CancellationToken cancellationToken = default)
{
    var spec = new EntityByXSpecification(x);
    return await FindOneAsync(spec, cancellationToken: cancellationToken);
}
```

### 3. Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯ Entity (Exists Pattern)

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task<bool> HasXAsync(Guid id, CancellationToken cancellationToken = default)
{
    return await PrepareQuery(_dbSet)
        .AnyAsync(e => e.Id == id && e.X != null, cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Predicate):
```csharp
public async Task<bool> HasXAsync(Guid id, CancellationToken cancellationToken = default)
{
    return await ExistsAsync(e => e.Id == id && e.X != null, cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Specification):
```csharp
public async Task<bool> HasXAsync(Guid id, CancellationToken cancellationToken = default)
{
    var spec = new EntityHasXSpecification(id);
    return await ExistsAsync(spec, cancellationToken: cancellationToken);
}
```

### 4. Ú¯Ø±ÙØªÙ† Entity Ø¨Ø§ ID (GetById Pattern)

#### âš ï¸ Ù†Ú©ØªÙ‡ Ù…Ù‡Ù…:
`GetByIdAsync` Ø§Ø³ØªØ«Ù†Ø§ Ù…ÛŒâ€ŒØ§Ù†Ø¯Ø§Ø²Ø¯ Ø§Ú¯Ø± Entity Ù¾ÛŒØ¯Ø§ Ù†Ø´ÙˆØ¯. Ø¨Ø±Ø§ÛŒ Ù…Ù‚Ø¯Ø§Ø± nullable Ø§Ø² `FindOneAsync` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯.

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task<Entity?> GetByIdAsync(Guid id, CancellationToken cancellationToken = default)
{
    try
    {
        return await GetByIdAsync(id, cancellationToken);
    }
    catch
    {
        return null;
    }
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø§Ú¯Ø± Entity Ø¨Ø§ÛŒØ¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯):
```csharp
public async Task<Entity> GetByIdAsync(Guid id, CancellationToken cancellationToken = default)
{
    return await GetByIdAsync(id, cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø§Ú¯Ø± Entity Ù…Ù…Ú©Ù† Ø§Ø³Øª ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯):
```csharp
public async Task<Entity?> FindByIdAsync(Guid id, CancellationToken cancellationToken = default)
{
    return await FindOneAsync(e => e.Id == id, cancellationToken: cancellationToken);
}
```

### 5. Ø´Ù…Ø§Ø±Ø´ EntityÙ‡Ø§ (Count Pattern)

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task<int> CountByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    return await PrepareQuery(_dbSet)
        .Where(e => e.X == x)
        .CountAsync(cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Predicate):
```csharp
public async Task<int> CountByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    return await CountAsync(e => e.X == x, cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ (Ø¨Ø§ Specification):
```csharp
public async Task<int> CountByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    var spec = new EntityByXSpecification(x);
    return await CountAsync(spec, cancellationToken: cancellationToken);
}
```

### 6. Ø­Ø°Ù Ú†Ù†Ø¯ÛŒÙ† Entity (DeleteRange Pattern)

#### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ:
```csharp
public async Task DeleteByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    var entities = await PrepareQuery(_dbSet)
        .Where(e => e.X == x)
        .ToListAsync(cancellationToken);

    foreach (var entity in entities)
    {
        _context.Set<Entity>().Remove(entity);
    }
    await _context.SaveChangesAsync(cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­:
```csharp
public async Task DeleteByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    var entities = (await FindAsync(e => e.X == x, cancellationToken: cancellationToken)).ToList();

    if (entities.Any())
    {
        await DeleteRangeAsync(entities, cancellationToken: cancellationToken);
    }
}
```

### 7. Ø­Ø°Ù Ø¨Ù‡ÛŒÙ†Ù‡ (BulkDelete Pattern)

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø­Ø¬Ù…ÛŒ:
```csharp
public async Task<int> DeleteExpiredAsync(DateTime cutoffDate, CancellationToken cancellationToken = default)
{
    return await BulkDeleteAsync(
        e => e.ExpiresAt < cutoffDate, 
        cancellationToken: cancellationToken);
}
```

### 8. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Specifications

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø§ Specification:
```csharp
public async Task<IEnumerable<Entity>> GetBySpecificationAsync(
    ISpecification<Entity> specification, 
    CancellationToken cancellationToken = default)
{
    var query = PrepareQuery(_dbSet);
    query = specification.Apply(query);
    return await query.ToListAsync(cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø§ Paginated Specification (Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Ù…ØªØ¯ Ù¾Ø§ÛŒÙ‡):
```csharp
public async Task<PaginatedResult<Entity>> GetPaginatedAsync(
    IPaginatedSpecification<Entity> spec,
    CancellationToken cancellationToken = default)
{
    return await GetPaginatedAsync(spec, cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø§ Sortable Paginated Specification:
```csharp
public async Task<PaginatedResult<Entity>> GetPaginatedAsync(
    IPaginatedSortableSpecification<Entity> spec,
    CancellationToken cancellationToken = default)
{
    return await GetPaginatedAsync(spec, cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø§ Specification Ø³Ø§Ø¯Ù‡:
```csharp
public async Task<IEnumerable<Entity>> GetBySpecificationAsync(
    ISpecification<Entity> specification, 
    CancellationToken cancellationToken = default)
{
    return await FindAsync(specification, cancellationToken: cancellationToken);
}
```

### 9. Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Projection (Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ)

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§ÛŒ Ø®Ø§Øµ:
```csharp
public async Task<IEnumerable<EntityDto>> GetEntityDtosAsync(
    CancellationToken cancellationToken = default)
{
    return await GetAllAsync(
        e => new EntityDto 
        { 
            Id = e.Id, 
            Name = e.Name 
        }, 
        cancellationToken: cancellationToken);
}
```

#### âœ… Ø§Ù„Ú¯ÙˆÛŒ ØµØ­ÛŒØ­ Ø¨Ø±Ø§ÛŒ Ù¾ÛŒØ¯Ø§ Ú©Ø±Ø¯Ù† Ø¨Ø§ Projection:
```csharp
public async Task<EntityDto?> GetEntityDtoAsync(
    Guid id, 
    CancellationToken cancellationToken = default)
{
    return await FindOneAsync(
        e => e.Id == id,
        e => new EntityDto 
        { 
            Id = e.Id, 
            Name = e.Name 
        }, 
        cancellationToken: cancellationToken);
}
```

---

## ğŸ” Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² PrepareQuery

### Ù‚ÙˆØ§Ù†ÛŒÙ†:
- **MUST**: `PrepareQuery()` Ø¨Ø±Ø§ÛŒ IncludeÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST**: `PrepareQuery()` Ø¯Ø± Ù…ØªØ¯Ù‡Ø§ÛŒ Query Ø³ÙØ§Ø±Ø´ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **SHOULD**: IncludeÙ‡Ø§ÛŒ Ø¶Ø±ÙˆØ±ÛŒ ÙÙ‚Ø· Ø¯Ø± `PrepareQuery()` ØªØ¹Ø±ÛŒÙ Ø´ÙˆÙ†Ø¯
- **SHOULD**: Ø§Ø² Eager Loading ØºÛŒØ±Ø¶Ø±ÙˆØ±ÛŒ Ø§Ø¬ØªÙ†Ø§Ø¨ Ø´ÙˆØ¯

### Ù…Ø«Ø§Ù„:
```csharp
protected override IQueryable<Entity> PrepareQuery(IQueryable<Entity> query)
{
    return query
        .Include(e => e.RelatedEntity)
        .Include(e => e.Collection)
            .ThenInclude(c => c.NestedEntity);
}
```

---

## ğŸ¯ Ù…Ø«Ø§Ù„ Ú©Ø§Ù…Ù„ Repository

```csharp
using Microsoft.EntityFrameworkCore;
using MCA.SharedKernel.Infrastructure.Repositories;
using Nezam.Refahi.Facilities.Domain.Entities;
using Nezam.Refahi.Facilities.Domain.Repositories;
using Nezam.Refahi.Facilities.Infrastructure.Persistence;

namespace Nezam.Refahi.Facilities.Infrastructure.Persistence.Repositories;

/// <summary>
/// EF Core implementation of IFacilityCycleDependencyRepository
/// </summary>
public class FacilityCycleDependencyRepository : EfRepository<FacilitiesDbContext, FacilityCycleDependency, Guid>, IFacilityCycleDependencyRepository
{
    public FacilityCycleDependencyRepository(FacilitiesDbContext context) : base(context)
    {
    }

    protected override IQueryable<FacilityCycleDependency> PrepareQuery(IQueryable<FacilityCycleDependency> query)
    {
        return query
            .Include(d => d.FacilityCycle)
                .ThenInclude(c => c.Facility);
    }

    public async Task<List<FacilityCycleDependency>> GetByCycleIdAsync(Guid cycleId, CancellationToken cancellationToken = default)
    {
        return (await FindAsync(d => d.CycleId == cycleId, cancellationToken: cancellationToken)).ToList();
    }

    public async Task<List<FacilityCycleDependency>> GetByRequiredFacilityIdAsync(Guid requiredFacilityId, CancellationToken cancellationToken = default)
    {
        return (await FindAsync(d => d.RequiredFacilityId == requiredFacilityId, cancellationToken: cancellationToken)).ToList();
    }

    public async Task<bool> HasDependencyAsync(Guid cycleId, Guid requiredFacilityId, CancellationToken cancellationToken = default)
    {
        return await ExistsAsync(d => d.CycleId == cycleId && d.RequiredFacilityId == requiredFacilityId, cancellationToken: cancellationToken);
    }

    public async Task<List<FacilityCycleDependency>> GetByCycleIdsAsync(List<Guid> cycleIds, CancellationToken cancellationToken = default)
    {
        return (await FindAsync(d => cycleIds.Contains(d.CycleId), cancellationToken: cancellationToken)).ToList();
    }

    // AddAsync, UpdateAsync, DeleteAsync are provided by the base EfRepository class

    public async Task DeleteByCycleIdAsync(Guid cycleId, CancellationToken cancellationToken = default)
    {
        var dependencies = (await FindAsync(d => d.CycleId == cycleId, cancellationToken: cancellationToken)).ToList();

        if (dependencies.Any())
        {
            await DeleteRangeAsync(dependencies, cancellationToken: cancellationToken);
        }
    }

    public async Task<bool> HasCircularDependencyAsync(Guid cycleId, Guid requiredFacilityId, CancellationToken cancellationToken = default)
    {
        return await ExistsAsync(d => d.CycleId == cycleId && d.RequiredFacilityId == requiredFacilityId, cancellationToken: cancellationToken);
    }
}
```

---

## âœ… Ú†Ú©â€ŒÙ„ÛŒØ³Øª Ù‚Ø¨Ù„ Ø§Ø² Ù¾ÛŒØ§Ø¯Ù‡â€ŒØ³Ø§Ø²ÛŒ Repository

### Ù‚Ø¨Ù„ Ø§Ø² Ù†ÙˆØ´ØªÙ† Repository:
1. âœ… Ø¢ÛŒØ§ Repository Ø§Ø² `EfRepository<TDbContext, T, TKey>` Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
2. âœ… Ø¢ÛŒØ§ Interface Ø§Ø² `IRepository<T, TKey>` Ø§Ø±Ø«â€ŒØ¨Ø±ÛŒ Ù…ÛŒâ€ŒÚ©Ù†Ø¯ØŸ
3. âœ… Ø¢ÛŒØ§ `PrepareQuery()` Ø¨Ø±Ø§ÛŒ IncludeÙ‡Ø§ÛŒ Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ØªØ¹Ø±ÛŒÙ Ø´Ø¯Ù‡ Ø§Ø³Øªï¼Ÿ
4. âœ… Ø¢ÛŒØ§ Ø§Ø² `FindAsync()` ÛŒØ§ `FindOneAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `Where().ToListAsync()` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
5. âœ… Ø¢ÛŒØ§ Ø§Ø² `ExistsAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `AnyAsync()` Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
6. âœ… Ø¢ÛŒØ§ Ø§Ø² `GetByIdAsync()` ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ø±Ø¯ÛŒ Ú©Ù‡ Entity Ø¨Ø§ÛŒØ¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
7. âœ… Ø¢ÛŒØ§ Ø§Ø² `FindOneAsync()` Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ø±Ø¯ nullable Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
8. âœ… Ø¢ÛŒØ§ Ø§Ø² `CountAsync()` Ø¨Ù‡â€ŒØ¬Ø§ÛŒ `_dbSet.CountAsync()` Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
9. âœ… Ø¢ÛŒØ§ Ø§Ø² `DeleteRangeAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ú†Ù†Ø¯ÛŒÙ† Entity Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
10. âœ… Ø¢ÛŒØ§ Ø§Ø² `BulkDeleteAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø­Ø¬Ù…ÛŒ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
11. âœ… Ø¢ÛŒØ§ Ø§Ø² `GetPaginatedAsync()` Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ Ø¨Ø§ Specification Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
12. âœ… Ø¢ÛŒØ§ Ù…ØªØ¯Ù‡Ø§ÛŒ `AddAsync`, `UpdateAsync`, `DeleteAsync` ØªØ¹Ø±ÛŒÙ Ù†Ø´Ø¯Ù‡â€ŒØ§Ù†Ø¯ØŸ
13. âœ… Ø¢ÛŒØ§ Ø§Ø² Ø¯Ø³ØªØ±Ø³ÛŒ Ù…Ø³ØªÙ‚ÛŒÙ… Ø¨Ù‡ `_context` Ø¨Ø±Ø§ÛŒ CRUD Ø§Ø¬ØªÙ†Ø§Ø¨ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ
14. âœ… Ø¢ÛŒØ§ Ø§Ø² Specifications Ø¨Ø±Ø§ÛŒ QueryÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´Ø¯Ù‡ Ø§Ø³ØªØŸ

---

## ğŸš« Ø¶Ø¯Ø§Ù„Ú¯ÙˆÙ‡Ø§ (Ù…Ù…Ù†ÙˆØ¹)

### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ 1: ØªØ¹Ø±ÛŒÙ Ù…Ø¬Ø¯Ø¯ Ù…ØªØ¯Ù‡Ø§ÛŒ Ù¾Ø§ÛŒÙ‡
```csharp
// âŒ Ù…Ù…Ù†ÙˆØ¹
public async Task AddAsync(Entity entity, CancellationToken cancellationToken = default)
{
    await _context.Entities.AddAsync(entity, cancellationToken);
}
```

### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ 2: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² DbSet
```csharp
// âŒ Ù…Ù…Ù†ÙˆØ¹
public async Task<List<Entity>> GetByXAsync(Guid x, CancellationToken cancellationToken = default)
{
    return await _dbSet
        .Where(e => e.X == x)
        .ToListAsync(cancellationToken);
}
```

### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ 3: Ø§Ø³ØªÙØ§Ø¯Ù‡ Ù…Ø³ØªÙ‚ÛŒÙ… Ø§Ø² Context
```csharp
// âŒ Ù…Ù…Ù†ÙˆØ¹
public async Task DeleteAsync(Entity entity, CancellationToken cancellationToken = default)
{
    _context.Entities.Remove(entity);
    await _context.SaveChangesAsync(cancellationToken);
}
```

### âŒ Ø¶Ø¯Ø§Ù„Ú¯Ùˆ 4: Ø¹Ø¯Ù… Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² PrepareQuery
```csharp
// âŒ Ù…Ù…Ù†ÙˆØ¹
public async Task<Entity?> GetByIdAsync(Guid id, CancellationToken cancellationToken = default)
{
    return await _dbSet
        .Include(e => e.Related)
        .FirstOrDefaultAsync(e => e.Id == id, cancellationToken);
}
```

---

## ğŸ“š Ù…Ø±Ø§Ø¬Ø¹ Ùˆ Ø§Ù„Ú¯ÙˆÙ‡Ø§ÛŒ Ø§Ø¶Ø§ÙÛŒ

### Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø§Ø² Specifications:
- **MUST**: Ø¨Ø±Ø§ÛŒ QueryÙ‡Ø§ÛŒ Ù¾ÛŒÚ†ÛŒØ¯Ù‡ Ø§Ø² `ISpecification<T>` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **MUST**: Ø¨Ø±Ø§ÛŒ Pagination Ø§Ø² `IPaginatedSpecification<T>` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯
- **SHOULD**: Specifications Ø¯Ø± Ù„Ø§ÛŒÙ‡ Application ØªØ¹Ø±ÛŒÙ Ø´ÙˆÙ†Ø¯

### Ù…Ø¯ÛŒØ±ÛŒØª Context:
- **MUST**: Repository Ù†Ø¨Ø§ÛŒØ¯ `SaveChangesAsync()` Ø±Ø§ Ù…Ø³ØªÙ‚ÛŒÙ…Ø§Ù‹ ÙØ±Ø§Ø®ÙˆØ§Ù†ÛŒ Ú©Ù†Ø¯ (Ù…Ú¯Ø± Ø¯Ø± `save = true`)
- **MUST**: Ù…Ø¯ÛŒØ±ÛŒØª ØªØ±Ø§Ú©Ù†Ø´ Ø§Ø² Ø·Ø±ÛŒÙ‚ Unit of Work Ø§Ù†Ø¬Ø§Ù… Ø´ÙˆØ¯
- **SHOULD**: Ø§Ø² Tracking Ø¨Ù‡ÛŒÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ø´ÙˆØ¯ (Ù¾ÛŒØ´â€ŒÙØ±Ø¶ ÙØ¹Ø§Ù„ Ø§Ø³Øª)

---

## ğŸ”„ Migration Path

### Ø§Ú¯Ø± Repository Ù…ÙˆØ¬ÙˆØ¯ÛŒ Ø¯Ø§Ø±ÛŒØ¯ Ú©Ù‡ Ù‚ÙˆØ§Ù†ÛŒÙ† Ø±Ø§ Ø±Ø¹Ø§ÛŒØª Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯:

1. **Ø­Ø°Ù Ù…ØªØ¯Ù‡Ø§ÛŒ ØªÚ©Ø±Ø§Ø±ÛŒ**: `AddAsync`, `UpdateAsync`, `DeleteAsync` Ø±Ø§ Ø­Ø°Ù Ú©Ù†ÛŒØ¯
2. **ØªØ¨Ø¯ÛŒÙ„ QueryÙ‡Ø§**: `Where().ToListAsync()` Ø±Ø§ Ø¨Ù‡ `FindAsync()` ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒØ¯
3. **ØªØ¨Ø¯ÛŒÙ„ Exists**: `AnyAsync()` Ù…Ø³ØªÙ‚ÛŒÙ… Ø±Ø§ Ø¨Ù‡ `ExistsAsync()` ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒØ¯
4. **Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Delete**: Ø­Ø°Ù Ú†Ù†Ø¯ØªØ§ÛŒÛŒ Ø±Ø§ Ø¨Ù‡ `DeleteRangeAsync()` ØªØ¨Ø¯ÛŒÙ„ Ú©Ù†ÛŒØ¯

---

## âœ… Ø®Ù„Ø§ØµÙ‡ Ù‚ÙˆØ§Ù†ÛŒÙ† Ú©Ù„ÛŒØ¯ÛŒ

1. **Ù‡Ù…ÛŒØ´Ù‡ Ø§Ø² Ú©Ù„Ø§Ø³ Ù¾Ø§ÛŒÙ‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯** - ØªÚ©Ø±Ø§Ø± Ù…Ù†Ø·Ù‚ Ù…Ù…Ù†ÙˆØ¹
2. **Ø§Ø² `FindAsync()` ÛŒØ§ `FindOneAsync()` Ø¨Ø±Ø§ÛŒ Query** - Ù†Ù‡ `Where().ToListAsync()` ÛŒØ§ `FirstOrDefaultAsync()` Ù…Ø³ØªÙ‚ÛŒÙ…
3. **Ø§Ø² `ExistsAsync()` Ø¨Ø±Ø§ÛŒ Ø¨Ø±Ø±Ø³ÛŒ ÙˆØ¬ÙˆØ¯** - Ù†Ù‡ `AnyAsync()` Ù…Ø³ØªÙ‚ÛŒÙ…
4. **Ø§Ø² `GetByIdAsync()` ÙÙ‚Ø· Ø¨Ø±Ø§ÛŒ Ù…ÙˆØ§Ø±Ø¯ÛŒ Ú©Ù‡ Entity Ø¨Ø§ÛŒØ¯ ÙˆØ¬ÙˆØ¯ Ø¯Ø§Ø´ØªÙ‡ Ø¨Ø§Ø´Ø¯** - Ø¨Ø±Ø§ÛŒ nullable Ø§Ø² `FindOneAsync()` Ø§Ø³ØªÙØ§Ø¯Ù‡ Ú©Ù†ÛŒØ¯
5. **Ø§Ø² `CountAsync()` Ø¨Ø±Ø§ÛŒ Ø´Ù…Ø§Ø±Ø´** - Ù†Ù‡ `CountAsync()` Ù…Ø³ØªÙ‚ÛŒÙ… Ø±ÙˆÛŒ `_dbSet`
6. **Ø§Ø² `DeleteRangeAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ú†Ù†Ø¯ØªØ§ÛŒÛŒ** - Ù†Ù‡ Ø­Ù„Ù‚Ù‡ Ùˆ Remove
7. **Ø§Ø² `BulkDeleteAsync()` Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù Ø­Ø¬Ù…ÛŒ** - Ù†Ù‡ Load Ùˆ Delete
8. **Ø§Ø² `PrepareQuery()` Ø¨Ø±Ø§ÛŒ Include** - Ù†Ù‡ Include Ù…Ø³ØªÙ‚ÛŒÙ… Ø¯Ø± Query
9. **Ø§Ø² `GetPaginatedAsync()` Ø¨Ø±Ø§ÛŒ ØµÙØ­Ù‡â€ŒØ¨Ù†Ø¯ÛŒ** - Ù†Ù‡ Skip/Take Ø¯Ø³ØªÛŒ
10. **Ø§Ø² Specifications Ø¨Ø±Ø§ÛŒ Query Ù¾ÛŒÚ†ÛŒØ¯Ù‡** - Ù†Ù‡ QueryÙ‡Ø§ÛŒ Ø·ÙˆÙ„Ø§Ù†ÛŒ Ø¯Ø± Repository
11. **Ø§Ø² Projection methods Ø¨Ø±Ø§ÛŒ Ø§Ù†ØªØ®Ø§Ø¨ ÙÛŒÙ„Ø¯Ù‡Ø§** - Ø¨Ø±Ø§ÛŒ Ø¨Ù‡ÛŒÙ†Ù‡â€ŒØ³Ø§Ø²ÛŒ Query

---

âš ï¸ **Ù‡Ø± Ø§Ù†Ø­Ø±Ø§Ù Ø§Ø² Ø§ÛŒÙ† Ù‚ÙˆØ§Ù†ÛŒÙ† Ø¨Ø§ÛŒØ¯ ØªÙˆØ¬ÛŒÙ‡ Ùˆ Ù…Ø³ØªÙ†Ø¯ Ø´ÙˆØ¯.**
